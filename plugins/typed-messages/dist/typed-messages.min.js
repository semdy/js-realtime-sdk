!function(a,b){"object"==typeof exports&&"undefined"!=typeof module?b(exports,require("leancloud-storage"),require("leancloud-realtime")):"function"==typeof define&&define.amd?define("typed-messages",["exports","leancloud-storage","leancloud-realtime"],b):b(a.AV=a.AV||{},a.AV,a.AV)}(this,function(a,b,c){"use strict";function d(a){return a&&"object"==typeof a&&"default"in a?a.default:a}function e(a,b){return b={exports:{}},a(b,b.exports),b.exports}var f="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},g=e(function(a){var b=a.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=b)}),h=d(g),i=Object.freeze({default:h}),j=e(function(a){var b=a.exports={version:"2.4.0"};"number"==typeof __e&&(__e=b)}),k=d(j),l=j.version,m=Object.freeze({default:k,version:l}),n=e(function(a){a.exports=function(a){if("function"!=typeof a)throw TypeError(a+" is not a function!");return a}}),o=d(n),p=Object.freeze({default:o}),q=e(function(a){var b=d(p);a.exports=function(a,c,d){if(b(a),void 0===c)return a;switch(d){case 1:return function(b){return a.call(c,b)};case 2:return function(b,d){return a.call(c,b,d)};case 3:return function(b,d,e){return a.call(c,b,d,e)}}return function(){return a.apply(c,arguments)}}}),r=d(q),s=Object.freeze({default:r}),t=e(function(a){a.exports=function(a){return"object"==typeof a?null!==a:"function"==typeof a}}),u=d(t),v=Object.freeze({default:u}),w=e(function(a){var b=d(v);a.exports=function(a){if(!b(a))throw TypeError(a+" is not an object!");return a}}),x=d(w),y=Object.freeze({default:x}),z=e(function(a){a.exports=function(a){try{return!!a()}catch(a){return!0}}}),A=d(z),B=Object.freeze({default:A}),C=e(function(a){a.exports=!d(B)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})}),D=d(C),E=Object.freeze({default:D}),F=e(function(a){var b=d(v),c=d(i).document,e=b(c)&&b(c.createElement);a.exports=function(a){return e?c.createElement(a):{}}}),G=d(F),H=Object.freeze({default:G}),I=e(function(a){a.exports=!d(E)&&!d(B)(function(){return 7!=Object.defineProperty(d(H)("div"),"a",{get:function(){return 7}}).a})}),J=d(I),K=Object.freeze({default:J}),L=e(function(a){var b=d(v);a.exports=function(a,c){if(!b(a))return a;var d,e;if(c&&"function"==typeof(d=a.toString)&&!b(e=d.call(a)))return e;if("function"==typeof(d=a.valueOf)&&!b(e=d.call(a)))return e;if(!c&&"function"==typeof(d=a.toString)&&!b(e=d.call(a)))return e;throw TypeError("Can't convert object to primitive value")}}),M=d(L),N=Object.freeze({default:M}),O=e(function(a,b){var c=d(y),e=d(K),f=d(N),g=Object.defineProperty;b.f=d(E)?Object.defineProperty:function(a,b,d){if(c(a),b=f(b,!0),c(d),e)try{return g(a,b,d)}catch(a){}if("get"in d||"set"in d)throw TypeError("Accessors not supported!");return"value"in d&&(a[b]=d.value),a}}),P=d(O),Q=O.f,R=Object.freeze({default:P,f:Q}),S=e(function(a){a.exports=function(a,b){return{enumerable:!(1&a),configurable:!(2&a),writable:!(4&a),value:b}}}),T=d(S),U=Object.freeze({default:T}),V=e(function(a){var b=d(R),c=d(U);a.exports=d(E)?function(a,d,e){return b.f(a,d,c(1,e))}:function(a,b,c){return a[b]=c,a}}),W=d(V),X=Object.freeze({default:W}),Y=e(function(a){var b=d(i),c=d(m),e=d(s),f=d(X),g="prototype",h=function(a,d,i){var j,k,l,m=a&h.F,n=a&h.G,o=a&h.S,p=a&h.P,q=a&h.B,r=a&h.W,s=n?c:c[d]||(c[d]={}),t=s[g],u=n?b:o?b[d]:(b[d]||{})[g];n&&(i=d);for(j in i)k=!m&&u&&void 0!==u[j],k&&j in s||(l=k?u[j]:i[j],s[j]=n&&"function"!=typeof u[j]?i[j]:q&&k?e(l,b):r&&u[j]==l?function(a){var b=function(b,c,d){if(this instanceof a){switch(arguments.length){case 0:return new a;case 1:return new a(b);case 2:return new a(b,c)}return new a(b,c,d)}return a.apply(this,arguments)};return b[g]=a[g],b}(l):p&&"function"==typeof l?e(Function.call,l):l,p&&((s.virtual||(s.virtual={}))[j]=l,a&h.R&&t&&!t[j]&&f(t,j,l)))};h.F=1,h.G=2,h.S=4,h.P=8,h.B=16,h.W=32,h.U=64,h.R=128,a.exports=h}),Z=d(Y),$=Object.freeze({default:Z}),_=e(function(a){var b={}.hasOwnProperty;a.exports=function(a,c){return b.call(a,c)}}),aa=d(_),ba=Object.freeze({default:aa}),ca=e(function(a){var b={}.toString;a.exports=function(a){return b.call(a).slice(8,-1)}}),da=d(ca),ea=Object.freeze({default:da}),fa=e(function(a){var b=d(ea);a.exports=Object("z").propertyIsEnumerable(0)?Object:function(a){return"String"==b(a)?a.split(""):Object(a)}}),ga=d(fa),ha=Object.freeze({default:ga}),ia=e(function(a){a.exports=function(a){if(void 0==a)throw TypeError("Can't call method on  "+a);return a}}),ja=d(ia),ka=Object.freeze({default:ja}),la=e(function(a){var b=d(ha),c=d(ka);a.exports=function(a){return b(c(a))}}),ma=d(la),na=Object.freeze({default:ma}),oa=e(function(a){var b=Math.ceil,c=Math.floor;a.exports=function(a){return isNaN(a=+a)?0:(a>0?c:b)(a)}}),pa=d(oa),qa=Object.freeze({default:pa}),ra=e(function(a){var b=d(qa),c=Math.min;a.exports=function(a){return a>0?c(b(a),9007199254740991):0}}),sa=d(ra),ta=Object.freeze({default:sa}),ua=e(function(a){var b=d(qa),c=Math.max,e=Math.min;a.exports=function(a,d){return a=b(a),a<0?c(a+d,0):e(a,d)}}),va=d(ua),wa=Object.freeze({default:va}),xa=e(function(a){var b=d(na),c=d(ta),e=d(wa);a.exports=function(a){return function(d,f,g){var h,i=b(d),j=c(i.length),k=e(g,j);if(a&&f!=f){for(;j>k;)if(h=i[k++],h!=h)return!0}else for(;j>k;k++)if((a||k in i)&&i[k]===f)return a||k||0;return!a&&-1}}}),ya=d(xa),za=Object.freeze({default:ya}),Aa=e(function(a){var b=d(i),c="__core-js_shared__",e=b[c]||(b[c]={});a.exports=function(a){return e[a]||(e[a]={})}}),Ba=d(Aa),Ca=Object.freeze({default:Ba}),Da=e(function(a){var b=0,c=Math.random();a.exports=function(a){return"Symbol(".concat(void 0===a?"":a,")_",(++b+c).toString(36))}}),Ea=d(Da),Fa=Object.freeze({default:Ea}),Ga=e(function(a){var b=d(Ca)("keys"),c=d(Fa);a.exports=function(a){return b[a]||(b[a]=c(a))}}),Ha=d(Ga),Ia=Object.freeze({default:Ha}),Ja=e(function(a){var b=d(ba),c=d(na),e=d(za)(!1),f=d(Ia)("IE_PROTO");a.exports=function(a,d){var g,h=c(a),i=0,j=[];for(g in h)g!=f&&b(h,g)&&j.push(g);for(;d.length>i;)b(h,g=d[i++])&&(~e(j,g)||j.push(g));return j}}),Ka=d(Ja),La=Object.freeze({default:Ka}),Ma=e(function(a){a.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")}),Na=d(Ma),Oa=Object.freeze({default:Na}),Pa=e(function(a){var b=d(La),c=d(Oa);a.exports=Object.keys||function(a){return b(a,c)}}),Qa=d(Pa),Ra=Object.freeze({default:Qa}),Sa=e(function(a,b){b.f=Object.getOwnPropertySymbols}),Ta=d(Sa),Ua=Sa.f,Va=Object.freeze({default:Ta,f:Ua}),Wa=e(function(a,b){b.f={}.propertyIsEnumerable}),Xa=d(Wa),Ya=Wa.f,Za=Object.freeze({default:Xa,f:Ya}),$a=e(function(a){var b=d(ka);a.exports=function(a){return Object(b(a))}}),_a=d($a),ab=Object.freeze({default:_a}),bb=e(function(a){var b=d(Ra),c=d(Va),e=d(Za),f=d(ab),g=d(ha),h=Object.assign;a.exports=!h||d(B)(function(){var a={},b={},c=Symbol(),d="abcdefghijklmnopqrst";return a[c]=7,d.split("").forEach(function(a){b[a]=a}),7!=h({},a)[c]||Object.keys(h({},b)).join("")!=d})?function(a,d){for(var h=f(a),i=arguments.length,j=1,k=c.f,l=e.f;i>j;)for(var m,n=g(arguments[j++]),o=k?b(n).concat(k(n)):b(n),p=o.length,q=0;p>q;)l.call(n,m=o[q++])&&(h[m]=n[m]);return h}:h}),cb=d(bb),db=Object.freeze({default:cb}),eb=e(function(a){var b=d($);b(b.S+b.F,"Object",{assign:d(db)})});d(eb);var fb=e(function(a){a.exports=d(m).Object.assign}),gb=d(fb),hb=Object.freeze({default:gb}),ib=e(function(a){a.exports={default:d(hb),__esModule:!0}}),jb=d(ib),kb=e(function(a,b){!function(c){function d(a){var b=l(a);if(r)for(var c,d=0;c=u[d++];)a.hasOwnProperty(c)&&b.push(c);return b}function e(a,b,c){for(var e,f,g=d(c),i=0,j=g.length;i<j;)"__self"!==(e=g[i++])&&(f=c[e],p(f)&&!f.prototype.__self&&(!h||f.toString().indexOf(".__base")>-1)?b[e]=function(c,d){var e=a[c]?a[c]:"__constructor"===c?b.__self.__parent:q,f=function(){var a=this.__base;this.__base=f.__base;var b=d.apply(this,arguments);return this.__base=a,b};return f.__base=e,f}(e,f):b[e]=f)}function f(a,b){for(var c,d=1;c=a[d++];)b?p(c)?g.self(b,c.prototype,c):g.self(b,c):b=p(c)?g(a[0],c.prototype,c):g(a[0],c);return b||a[0]}function g(){var a=arguments,b=o(a[0]),c=b||p(a[0]),d=c?b?f(a[0]):a[0]:i,g=a[c?1:0]||{},h=a[c?2:1],j=g.__constructor||c&&d.prototype.__constructor?function(){return this.__constructor.apply(this,arguments)}:c?function(){return d.apply(this,arguments)}:function(){};if(!c)return j.prototype=g,j.prototype.__self=j.prototype.constructor=j,m(j,h);m(j,d),j.__parent=d;var l=d.prototype,n=j.prototype=k(l);return n.__self=n.constructor=j,g&&e(l,n,g),h&&e(d,j,h),j}var h=function(){return"_"}.toString().indexOf("_")>-1,i=function(){},j=Object.prototype.hasOwnProperty,k=Object.create||function(a){var b=function(){};return b.prototype=a,new b},l=Object.keys||function(a){var b=[];for(var c in a)j.call(a,c)&&b.push(c);return b},m=function(a,b){for(var c in b)j.call(b,c)&&(a[c]=b[c]);return a},n=Object.prototype.toString,o=Array.isArray||function(a){return"[object Array]"===n.call(a)},p=function(a){return"[object Function]"===n.call(a)},q=function(){},r=!0,s={toString:""};for(var t in s)s.hasOwnProperty(t)&&(r=!1);var u=r?["toString","valueOf"]:null;g.self=function(){var a=arguments,b=o(a[0]),c=b?f(a[0],a[0][0]):a[0],d=a[1],g=a[2],h=c.prototype;return d&&e(h,h,d),g&&e(c,c,g),c};var v=!0;"object"==typeof b&&(a.exports=g,v=!1),"object"==typeof modules&&"function"==typeof modules.define&&(modules.define("inherit",function(a){a(g)}),v=!1),"function"==typeof define&&(define(function(a,b,c){c.exports=g}),v=!1),v&&(c.inherit=g)}(f)}),lb=d(kb),mb=Object.freeze({default:lb}),nb=e(function(a){a.exports=d(mb)}),ob=d(nb);if(!b.File)throw new Error("LeanCloud Storage SDK not installed");if(!c.TypedMessage)throw new Error("LeanCloud Realtime SDK not installed");var pb=ob(c.TypedMessage,{__constructor:function(a){if(!(a instanceof b.File))throw new TypeError("file must be an AV.File");if("string"!=typeof a.id)throw new Error("file must be saved before used to create a Message");this.__base(),this._file=a,this._lcfile={objId:a.id,url:a.url(),metaData:jb(a.metaData()||{},{name:a.name()})}},getFile:function(){return this._file}},{_parseFileFromRawData:function(a){if(!a||!a._lcfile)throw new Error("malformed FileMessage content");var c=a._lcfile.objId;"string"!=typeof c&&(c="");var d=b.File.createWithoutData(c);return d.attributes=d.attributes||{},d._url=d.attributes.url=a._lcfile.url,d._metaData=d.attributes.metaData=a._lcfile.metaData||{},a._lcfile.metaData&&(d._name=d.attributes.name=a._lcfile.metaData.name),d},parse:function(a,b){var c=this._parseFileFromRawData(a);return this.__base(a,b||new this(c))}});c.messageType(-6)(pb),c.messageField("_lcfile")(pb);var qb=ob(pb);c.messageType(-2)(qb);var rb=ob(pb);c.messageType(-3)(rb);var sb=ob(pb);c.messageType(-4)(sb);var tb=ob(c.TypedMessage,{__constructor:function(a){if(!(a instanceof b.GeoPoint))throw new TypeError("geoPoint must be an AV.GeoPoint");this.__base(),this._geoPoint=a;var c=a.latitude,d=a.longitude;this._lcloc={latitude:c,longitude:d}},getLocation:function(){return this._geoPoint}},{parse:function(a,c){var d=a._lcloc,e=d.latitude,f=d.longitude,g=new b.GeoPoint({latitude:e,longitude:f});return this.__base(a,c||new this(g))}});c.messageType(-5)(tb),c.messageField("_lcloc")(tb);var ub="leancloud-realtime-plugin-typed-messages",vb={name:ub,messageClasses:[pb,qb,rb,sb,tb]};a.TypedMessagesPlugin=vb,a.FileMessage=pb,a.ImageMessage=qb,a.AudioMessage=rb,a.VideoMessage=sb,a.LocationMessage=tb,Object.defineProperty(a,"__esModule",{value:!0})});
//# sourceMappingURL=typed-messages.min.js.map